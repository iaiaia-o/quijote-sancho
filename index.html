<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>¬øEres Quijote o Sancho?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0; background: #f6f4ef; color: #312b23;
      font-family: 'Inter', Arial, sans-serif;
    }
    .main-container {
      max-width: 580px; margin: 34px auto 34px auto;
      background: #fff; border-radius: 18px; box-shadow: 0 4px 32px rgba(87,82,71,0.09);
      padding: 2em 1.6em 2em 1.6em;
    }
    h1 {
      font-family: 'Playfair Display', serif; color: #b79f68;
      font-size: 2.3em; margin-bottom: 0.3em; letter-spacing: .02em;
      text-shadow: 0 1px 0 rgba(183,159,104,0.11);
    }
    h2 {
      font-family: 'Playfair Display', serif; font-size: 1.3em;
      color: #7c6738; margin-bottom: 0.7em;
    }
    .subtitle {
      color: #857c5a; font-size: 1.1em; margin-bottom: 1.6em;
      font-weight: 500;
    }
    .start-btn, .continue-btn, .option-btn, .result-btn {
      background: linear-gradient(90deg,#b79f68 55%,#e3c57d 100%);
      color: #fff; border: none; border-radius: 12px;
      padding: 0.7em 1.5em; cursor: pointer; font-weight: 600;
      font-size: 1.15em; margin-top: 1.1em; box-shadow: 0 2px 16px rgba(183,159,104,0.11);
      transition: background 0.14s, box-shadow 0.14s;
      outline: none;
      display: inline-flex; align-items: center; gap: 10px;
    }
    .start-btn:hover, .continue-btn:hover, .option-btn:hover, .result-btn:hover {
      background: linear-gradient(90deg,#e3c57d 25%,#b79f68 90%);
      box-shadow: 0 4px 24px rgba(183,159,104,0.18);
    }
    .question-section, .result-section {
      display: none;
    }
    .question-title {
      font-size: 1.13em; color: #6c5a2e; font-weight: 600;
      margin-bottom: 1.2em; margin-top: 0.2em;
    }
    .options-group { display: flex; flex-direction: column; gap: 0.7em; margin-bottom: 1.3em;}
    .option-btn {
      background: #f6f4ef; color: #b79f68; border: 1.5px solid #e3c57d;
      border-radius: 9px; font-size: 1.09em; font-weight: 500;
      padding: 0.58em 1.2em; transition: background 0.2s;
      text-align: left; justify-content: flex-start;
    }
    .option-btn.selected, .option-btn:active {
      background: #e3c57d; color: #fff; border-color: #b79f68;
    }
    .draw-icons-group { display: flex; gap: 15px; justify-content: center; margin-bottom: 1.2em;}
    .draw-icon {
      width: 44px; height: 44px; border-radius: 50%; background: #f6f4ef;
      border: 2px solid #e3c57d; display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: border-color 0.18s, box-shadow 0.18s;
    }
    .draw-icon.selected {
      border-color: #b79f68; box-shadow: 0 2px 12px rgba(183,159,104,0.12)
    }
    .story-text { font-style: italic; font-size: 1.07em; color: #857c5a; margin-bottom: 1.1em;}
    .answer-input, .story-input {
      width: 97%; padding: 0.6em 1em; border-radius: 7px; border: 1.3px solid #b79f68;
      font-size: 1.09em; margin-bottom: 1em; background: #f6f4ef;
      color: #857c5a; font-family: inherit;
    }
    .badge-img {
      width: 90px; height: 90px; border-radius: 50%; margin-bottom: 1.2em;
      display: block; margin-left: auto; margin-right: auto; box-shadow: 0 4px 16px rgba(183,159,104,0.14);
    }
    .result-text { font-size: 1.18em; color: #6c5a2e; font-weight: 600; margin-top: 0.6em; margin-bottom: 1.1em;}
    .result-section .subtitle {text-align: center;}
    @media (max-width: 700px) {
      .main-container { max-width: 99vw; padding: 1em 0.5em;}
      h1 { font-size: 1.5em;}
      .badge-img { width: 56px; height: 56px;}
    }
  </style>
</head>
<body>
  <div class="main-container" id="welcome-section">
    <h1>¬øEres Quijote o Sancho?</h1>
    <div class="subtitle">10 retos para descubrir tu personalidad directiva <br>con la sabidur√≠a de los caminantes de La Mancha</div>
    <img src="https://raw.githubusercontent.com/iaiaia-o/quijote-day/main/quijote-symbolic.svg" alt="Quijote simb√≥lico" style="width:66px;display:block;margin:auto;margin-bottom:1.3em;">
    <p>
      <strong>¬øQu√© te inspira m√°s?</strong> ¬øLa audacia de so√±ar y lanzarte a lo desconocido,<br>
      o el arte de analizar y cuidar cada paso?<br><br>
      <em>Responde preguntas, contin√∫a historias y elige s√≠mbolos.<br>
      Al final sabr√°s si tu liderazgo camina como Don Quijote,<br>
      medita como Sancho Panza, o mezcla la magia de ambos.</em>
    </p>
    <button class="start-btn" onclick="startQuiz()">Comenzar los retos</button>
  </div>

  <div class="main-container question-section" id="question-section">
    <h2 id="question-counter"></h2>
    <div class="question-title" id="question-title"></div>
    <div id="question-content"></div>
    <button class="continue-btn" id="continue-btn" onclick="nextQuestion()" style="display:none">Continuar</button>
  </div>

  <div class="main-container result-section" id="result-section">
    <img id="badge-img" class="badge-img" src="" alt="Medalla Quijote/Sancho">
    <div class="result-text" id="result-text"></div>
    <div class="subtitle" id="result-subtitle"></div>
    <button class="result-btn" onclick="restartQuiz()">Volver a empezar</button>
  </div>

  <script>
    // --- Preguntas y retos ---
    // Cada reto tiene: tipo, t√≠tulo, contenido, opciones, iconos, historia, etc.
    const quizData = [
      { // 1. Test
        type: 'test',
        title: "En una reuni√≥n inesperada, ¬øc√≥mo act√∫as primero?",
        options: [
          { text: "Propongo una idea audaz y original", value: "quijote", icon: "üåü" },
          { text: "Escucho y analizo antes de decidir", value: "sancho", icon: "üõ°Ô∏è" },
          { text: "Busco una soluci√≥n creativa en equipo", value: "mixto", icon: "ü§ù" }
        ]
      },
      { // 2. Mixta
        type: 'test',
        title: "¬øQu√© s√≠mbolo te inspira m√°s cuando afrontas el cambio?",
        options: [
          { text: "El molino: desaf√≠o y visi√≥n", value: "quijote", icon: "üå¨Ô∏è" },
          { text: "El camino: prudencia y constancia", value: "sancho", icon: "üõ§Ô∏è" },
          { text: "La estrella: gu√≠a en lo desconocido", value: "mixto", icon: "‚≠ê" }
        ]
      },
      { // 3. Abierta
        type: 'open',
        title: "Imagina que tienes que convencer a tu equipo de embarcarse en una aventura arriesgada.<br>¬øQu√© les dir√≠as?",
        placeholder: "Escribe tu mensaje inspirador aqu√≠‚Ä¶"
      },
      { // 4. Mini-cuento
        type: 'story',
        title: "Mini historia: El equipo se encuentra ante un cruce de caminos en plena Mancha.",
        story: "Don Quijote propone seguir la senda desconocida, Sancho sugiere preguntar a los lugare√±os.<br>¬øC√≥mo contin√∫a la historia?",
        options: [
          { text: "Tomar el sendero desconocido", value: "quijote" },
          { text: "Consultar a los sabios del lugar", value: "sancho" },
          { text: "Esperar a que se despeje el camino", value: "mixto" }
        ]
      },
      { // 5. Dibujo/Elecci√≥n de iconos
        type: 'icons',
        title: "Elige dos s√≠mbolos que representan tu liderazgo:",
        icons: [
          { name: "Molino", value: "quijote", svg: "üå¨Ô∏è" },
          { name: "Libro", value: "sancho", svg: "üìö" },
          { name: "Sombrero", value: "mixto", svg: "üé©" },
          { name: "Lanza", value: "quijote", svg: "üó°Ô∏è" },
          { name: "Escudo", value: "sancho", svg: "üõ°Ô∏è" }
        ],
        selectCount: 2
      },
      { // 6. Test / Decisi√≥n r√°pida
        type: 'test',
        title: "¬øTe lanzas sin conocer todos los detalles o planificas minuciosamente antes de avanzar?",
        options: [
          { text: "Me lanzo y conf√≠o en mi intuici√≥n", value: "quijote", icon: "‚ö°" },
          { text: "Planifico cada paso", value: "sancho", icon: "üó∫Ô∏è" },
          { text: "Busco equilibrio y flexibilidad", value: "mixto", icon: "‚öñÔ∏è" }
        ]
      },
      { // 7. Secuencia de decisi√≥n (elige el orden)
        type: 'order',
        title: "Arrastra los iconos para ordenar tu proceso de toma de decisiones:",
        steps: [
          { name: "Idea", value: "quijote", svg: "üí°" },
          { name: "An√°lisis", value: "sancho", svg: "üîé" },
          { name: "Acci√≥n", value: "quijote", svg: "üèá" },
          { name: "Reflexi√≥n", value: "sancho", svg: "ü§î" }
        ]
      },
      { // 8. Mini-historia con elecci√≥n
        type: 'story',
        title: "Don Quijote y Sancho Panza debaten sobre arriesgarse en una nueva aventura empresarial.",
        story: "¬øQu√© aportas t√∫ a la conversaci√≥n?",
        options: [
          { text: "Animar a so√±ar y atreverse", value: "quijote" },
          { text: "Recordar la importancia de medir riesgos", value: "sancho" },
          { text: "Buscar una alternativa creativa", value: "mixto" }
        ]
      },
      { // 9. Pregunta creativa
        type: 'icons',
        title: "Elige el s√≠mbolo que representa tu filosof√≠a para afrontar cambios:",
        icons: [
          { name: "Molino", value: "quijote", svg: "üå¨Ô∏è" },
          { name: "Libro", value: "sancho", svg: "üìö" },
          { name: "Estrella", value: "mixto", svg: "‚≠ê" }
        ],
        selectCount: 1
      },
      { // 10. Abierta / Reflexi√≥n final
        type: 'open',
        title: "Completa la frase: 'Para liderar en tiempos de incertidumbre, creo que lo m√°s importante es...'",
        placeholder: "Escribe tu reflexi√≥n final aqu√≠‚Ä¶"
      }
    ];
    // --- Estado del cuestionario ---
    let currentQuestion = 0;
    let scores = { quijote: 0, sancho: 0, mixto: 0 };
    let userAnswers = [];

    // --- Mostrar pregunta/reto actual ---
    function startQuiz() {
      document.getElementById('welcome-section').style.display = "none";
      document.getElementById('result-section').style.display = "none";
      document.getElementById('question-section').style.display = "block";
      currentQuestion = 0;
      scores = { quijote: 0, sancho: 0, mixto: 0 };
      userAnswers = [];
      showQuestion();
    }

    function showQuestion() {
      const q = quizData[currentQuestion];
      document.getElementById('question-counter').textContent = `Reto ${currentQuestion + 1} de 10`;
      document.getElementById('question-title').innerHTML = q.title;
      const contentDiv = document.getElementById('question-content');
      contentDiv.innerHTML = '';
      document.getElementById('continue-btn').style.display = 'none';

      if (q.type === 'test') {
        const optionsGroup = document.createElement('div');
        optionsGroup.className = 'options-group';
        q.options.forEach((opt, i) => {
          const btn = document.createElement('button');
          btn.className = 'option-btn';
          btn.innerHTML = (opt.icon ? `<span>${opt.icon}</span> ` : '') + opt.text;
          btn.onclick = () => {
            optionsGroup.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            userAnswers[currentQuestion] = opt.value;
            document.getElementById('continue-btn').style.display = '';
          };
          optionsGroup.appendChild(btn);
        });
        contentDiv.appendChild(optionsGroup);

      } else if (q.type === 'open') {
        const input = document.createElement('textarea');
        input.className = 'answer-input';
        input.placeholder = q.placeholder || "";
        input.rows = 3;
        input.oninput = () => {
          userAnswers[currentQuestion] = input.value.trim();
          document.getElementById('continue-btn').style.display = input.value.trim().length > 0 ? '' : 'none';
        };
        contentDiv.appendChild(input);

      } else if (q.type === 'story') {
        const storyText = document.createElement('div');
        storyText.className = 'story-text';
        storyText.innerHTML = q.story;
        contentDiv.appendChild(storyText);
        const optionsGroup = document.createElement('div');
        optionsGroup.className = 'options-group';
        q.options.forEach(opt => {
          const btn = document.createElement('button');
          btn.className = 'option-btn';
          btn.textContent = opt.text;
          btn.onclick = () => {
            optionsGroup.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            userAnswers[currentQuestion] = opt.value;
            document.getElementById('continue-btn').style.display = '';
          };
          optionsGroup.appendChild(btn);
        });
        contentDiv.appendChild(optionsGroup);

      } else if (q.type === 'icons') {
        const iconsGroup = document.createElement('div');
        iconsGroup.className = 'draw-icons-group';
        let selected = [];
        q.icons.forEach((icon, idx) => {
          const iconDiv = document.createElement('div');
          iconDiv.className = 'draw-icon';
          iconDiv.innerHTML = `<span style="font-size:2em;">${icon.svg}</span><br>
            <span style="font-size:0.83em;color:#857c5a">${icon.name}</span>`;
          iconDiv.onclick = function() {
            if (iconDiv.classList.contains('selected')) {
              iconDiv.classList.remove('selected');
              selected = selected.filter(v => v !== icon.value);
            } else {
              if (selected.length < q.selectCount) {
                iconDiv.classList.add('selected');
                selected.push(icon.value);
              } else {
                // solo se pueden seleccionar los indicados
                return;
              }
            }
            userAnswers[currentQuestion] = selected.slice();
            document.getElementById('continue-btn').style.display = selected.length === q.selectCount ? '' : 'none';
          };
          iconsGroup.appendChild(iconDiv);
        });
        contentDiv.appendChild(iconsGroup);

      } else if (q.type === 'order') {
        // Secuencia tipo drag & drop
        const steps = q.steps.map(s => ({...s}));
        const container = document.createElement('div');
        container.className = 'draw-icons-group';
        steps.forEach((step, idx) => {
          const iconDiv = document.createElement('div');
          iconDiv.className = 'draw-icon';
          iconDiv.draggable = true;
          iconDiv.innerHTML = `<span style="font-size:2em;">${step.svg}</span><br>
            <span style="font-size:0.83em;color:#857c5a">${step.name}</span>`;
          iconDiv.dataset.idx = idx;
          iconDiv.ondragstart = function(e) {
            e.dataTransfer.setData("text/plain", idx);
          };
          iconDiv.ondragover = function(e) { e.preventDefault(); };
          iconDiv.ondrop = function(e) {
            e.preventDefault();
            const from = Number(e.dataTransfer.getData("text/plain"));
            const to = Number(iconDiv.dataset.idx);
            // Intercambiar posiciones
            [steps[from], steps[to]] = [steps[to], steps[from]];
            // Volver a renderizar
            renderSteps();
          };
          container.appendChild(iconDiv);
        });
        function renderSteps() {
          while (container.firstChild) container.removeChild(container.firstChild);
          steps.forEach((step, idx) => {
            const iconDiv = document.createElement('div');
            iconDiv.className = 'draw-icon';
            iconDiv.draggable = true;
            iconDiv.innerHTML = `<span style="font-size:2em;">${step.svg}</span><br>
              <span style="font-size:0.83em;color:#857c5a">${step.name}</span>`;
            iconDiv.dataset.idx = idx;
            iconDiv.ondragstart = function(e) { e.dataTransfer.setData("text/plain", idx); };
            iconDiv.ondragover = function(e) { e.preventDefault(); };
            iconDiv.ondrop = function(e) {
              e.preventDefault();
              const from = Number(e.dataTransfer.getData("text/plain"));
              const to = Number(iconDiv.dataset.idx);
              [steps[from], steps[to]] = [steps[to], steps[from]];
              renderSteps();
            };
            container.appendChild(iconDiv);
          });
        }
        renderSteps();
        contentDiv.appendChild(container);
        // Continuar solo si el orden ha cambiado
        let initialOrder = q.steps.map(s => s.name).join(",");
        document.getElementById('continue-btn').style.display = '';
        userAnswers[currentQuestion] = steps.map(s => s.value);
      }
    }

    function nextQuestion() {
      // Calcular puntuaciones por tipo de respuesta
      const answer = userAnswers[currentQuestion];
      const q = quizData[currentQuestion];
      if (q.type === 'test' || q.type === 'story') {
        if (answer === 'quijote') scores.quijote++;
        else if (answer === 'sancho') scores.sancho++;
        else scores.mixto++;
      } else if (q.type === 'icons') {
        if (Array.isArray(answer)) {
          answer.forEach(val => {
            if (val === 'quijote') scores.quijote++;
            else if (val === 'sancho') scores.sancho++;
            else scores.mixto++;
          });
        } else {
          if (answer === 'quijote') scores.quijote++;
          else if (answer === 'sancho') scores.sancho++;
          else scores.mixto++;
        }
      } else if (q.type === 'order') {
        // Si el primer paso es "Idea" y el √∫ltimo es "Reflexi√≥n" es quijote, si es "An√°lisis" y "Acci√≥n" es sancho, mixto si alterna
        const order = answer;
        if (order[0] === 'quijote' && order[order.length-1] === 'sancho') scores.quijote++;
        else if (order[0] === 'sancho' && order[order.length-1] === 'quijote') scores.sancho++;
        else scores.mixto++;
      }
      // Preguntas abiertas suman a mixto
      if (q.type === 'open') scores.mixto++;

      currentQuestion++;
      if (currentQuestion < quizData.length) {
        showQuestion();
      } else {
        showResult();
      }
    }

    // --- Mostrar resultado final ---
    function showResult() {
      document.getElementById('question-section').style.display = 'none';
      document.getElementById('result-section').style.display = 'block';
      // Calcular el perfil dominante
      let profile = "mixto";
      if (scores.quijote > scores.sancho && scores.quijote > scores.mixto) profile = "quijote";
      else if (scores.sancho > scores.quijote && scores.sancho > scores.mixto) profile = "sancho";
      // Medalla visual
      let badgeSrc = "";
      let resultText = "";
      let subtitle = "";
      if (profile === "quijote") {
        badgeSrc = "https://raw.githubusercontent.com/iaiaia-o/quijote-day/main/medalla-quijote.svg";
        resultText = "Caminas como Don Quijote";
        subtitle = "Tu liderazgo es visionario, audaz y capaz de inspirar aventuras. Sue√±as en grande, te atreves a romper moldes y contagias entusiasmo.";
      } else if (profile === "sancho") {
        badgeSrc = "https://raw.githubusercontent.com/iaiaia-o/quijote-day/main/medalla-sancho.svg";
        resultText = "Meditas como Sancho Panza";
        subtitle = "Tu liderazgo es prudente, reflexivo y creativo en lo cotidiano. Analizas, cuidas a tu equipo y conviertes los sue√±os en caminos reales.";
      } else {
        badgeSrc = "https://raw.githubusercontent.com/iaiaia-o/quijote-day/main/medalla-mixto.svg";
        resultText = "Eres Quijote y Sancho a la vez";
        subtitle = "Sabes so√±ar y lanzarte, pero tambi√©n analizar y cuidar. Tu liderazgo combina visi√≥n y pragmatismo, imaginaci√≥n y sentido com√∫n.";
      }
      document.getElementById('badge-img').src = badgeSrc;
      document.getElementById('result-text').textContent = resultText;
      document.getElementById('result-subtitle').textContent = subtitle;
    }

    function restartQuiz() {
      document.getElementById('result-section').style.display = "none";
      document.getElementById('welcome-section').style.display = "block";
    }
  </script>
</body>
</html>
